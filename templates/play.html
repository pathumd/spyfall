<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Spyfall</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Bootstrap -->
        <link rel="icon" type="image/x-icon" href="{{ url_for('static',filename='images/favicon.ico') }}">
        <link rel= "stylesheet" type= "text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/play.css') }}">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js" integrity="sha512-Xm9qbB6Pu06k3PUwPj785dyTl6oHxgsv9nHp7ej7nCpAqGZT3OZpsELuCYX05DdonFpTlBpXMOxjavIAIUwr0w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    </head>
    <body>
        <!-- Nav bar -->
        <nav role="navigation">
            <div id="menuToggle">
            <input type="checkbox" />
            <span></span>
            <span></span>
            <span></span>
            <ul id="menu">
                <a href="/"><li>Home</li></a>
                <a href="#"><li>How to play</li></a>
                <a href="#"><li>Support</li></a>
            </ul>
            </div>
        </nav>

        <!-- Main page -->
        <div class="main-container">
            <!-- Timer -->
            <h1 class="timer">8:00</h1>

            <!--Location images -->
            {% if images is not none %}
                <div id="slidy-container" style="width: 25%; overflow: hidden; margin: 0 auto; padding-top: 25px;">
                    <figure id="slidy">
                    {% for image in images %}
                        <img class="location-img" src='{{image}}' referrerpolicy="no-referrer" alt="Location image">
                    {% endfor %}
                    </figure>
                </div>
            {% endif %}
            
            <!--Role-->
            <h1 class="role-text">You are a <span class="player-role">{{ role }}</span></h1>
            <!-- Location -->
            {% if selectedLocation is not none %}
                <h1 class="selected-location">at a {{ selectedLocation }}</h1>
            {% endif %}

            <!-- Player names -->
            <div class="players-list-container">
                <h1 class="player-list-title">Player list:</h1>
                <div class="player-names">
                    {% for player in players %}
                        <div class="player-name">
                            <input type="checkbox" id="test1" />
                            <label for="test1">{{ player }}</label>
                        </div>
                    {% endfor %}
                    <div class="player-name">
                        <input type="checkbox" id="test2" />
                        <label for="test2">Some player</label>
                    </div>
                    
                    <div class="player-name">
                        <input type="checkbox" id="test3" />
                        <label for="test3">Some player</label>
                    </div>

                    <div class="player-name">
                        <input type="checkbox" id="test4" />
                        <label for="test4">Some player</label>
                    </div>
                    
                    <div class="player-name">
                        <input type="checkbox" id="test5" />
                        <label for="test5">Some player</label>
                    </div>

                    <div class="player-name">
                        <input type="checkbox" id="test6" />
                        <label for="test6">Some player</label>
                    </div>
                    
                    <div class="player-name">
                        <input type="checkbox" id="test7" />
                        <label for="test7">Some player</label>
                    </div>

                    <div class="player-name">
                        <input type="checkbox" id="test8" />
                        <label for="test8">Some player</label>
                    </div>

                    <div class="player-name">
                        <input type="checkbox" id="test9" />
                        <label for="test9">Some player</label>
                    </div>

                    <div class="player-name">
                        <input type="checkbox" id="test10" />
                        <label for="test10">Some player</label>
                    </div>

                    <div class="player-name">
                        <input type="checkbox" id="test11" />
                        <label for="test11">Some player</label>
                    </div>
                    
                    <div class="player-name">
                        <input type="checkbox" id="test12" />
                        <label for="test12">Some player</label>
                    </div>
                </div>
            </div>

            <div class="location-list-container">
                <h1 class="location-list-title">Locations:</h1>
                <div class="location-names">
                    {% for location in locations %}
                        <div class="location-name">
                            <input type="checkbox" id="{{ location }}" />
                            <label for="{{location }}">{{ location }}</label>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </body>

    <script>
        /* user defined variables */
        var timeOnSlide = 3;	
        // the time each image will remain static on the screen, measured in seconds
        timeBetweenSlides = 1;
        // the time taken to transition between images, measured in seconds

        // test if the browser supports animation, and if it needs a vendor prefix to do so
        animationstring = 'animation';
        animation = false;
        keyframeprefix = '';
        domPrefixes = 'Webkit Moz O Khtml'.split(' '); 
        // array of possible vendor prefixes
        pfx  = '';
        slidy = document.getElementById("slidy"); 
        if (slidy.style.animationName !== undefined) { animation = true; } 
        // browser supports keyframe animation w/o prefixes

        if( animation === false ) {
        for( var i = 0; i < domPrefixes.length; i++ ) {
            if( slidy.style[ domPrefixes[i] + 'AnimationName' ] !== undefined ) {
            pfx = domPrefixes[ i ];
            animationstring = pfx + 'Animation';
            keyframeprefix = '-' + pfx.toLowerCase() + '-';
            animation = true;
            break;
            }
        }
        }

        if( animation === false ) {
            // animate in JavaScript fallback
        } else {
        var images = slidy.getElementsByTagName("img"),
            firstImg = images[0], 
            // get the first image inside the "slidy" element.
            imgWrap = firstImg.cloneNode(false);  // copy it.
            slidy.appendChild(imgWrap); // add the clone to the end of the images
            var imgCount = images.length, // count the number of images in the slide, including the new cloned element
            totalTime = (timeOnSlide + timeBetweenSlides) * (imgCount - 1), // calculate the total length of the animation by multiplying the number of _actual_ images by the amount of time for both static display of each image and motion between them
            slideRatio = (timeOnSlide / totalTime)*100, // determine the percentage of time an induvidual image is held static during the animation
            moveRatio = (timeBetweenSlides / totalTime)*100, // determine the percentage of time for an individual movement
            basePercentage = 100/imgCount, // work out how wide each image should be in the slidy, as a percentage.
            position = 0, // set the initial position of the slidy element
            css = document.createElement("style"); // start marking a new style sheet
            css.type = "text/css";
            css.innerHTML += "#slidy { text-align: left; margin: 0; font-size: 0; position: relative; width: " + (imgCount * 100) + "%;  }\n"; // set the width for the slidy container
            css.innerHTML += "#slidy img { float: left; width: " + basePercentage + "%; }\n";
            css.innerHTML += "@"+keyframeprefix+"keyframes slidy {\n"; 
            for (i=0;i<(imgCount-1); i++) { // 
                position+= slideRatio; // make the keyframe the position of the image
                css.innerHTML += position+"% { left: -"+(i * 100)+"%; }\n";
                position += moveRatio; // make the postion for the _next_ slide
                css.innerHTML += position+"% { left: -"+((i+1) * 100)+"%; }\n";
            }
            css.innerHTML += "}\n";
            css.innerHTML += "#slidy { left: 0%; "+keyframeprefix+"transform: translate3d(0,0,0); "+keyframeprefix+"animation: "+totalTime+"s slidy infinite; }\n"; // call on the completed keyframe animation sequence
            document.body.appendChild(css); // add the new stylesheet to the end of the document
        }
    </script>
</html> 